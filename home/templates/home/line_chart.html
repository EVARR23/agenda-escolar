<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <title>Dashboard - Agenda Escolar</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <h1>Dashboard da Agenda Escolar</h1>

    <!-- Aqui você pode colocar outras informações da dashboard -->

    <h2>Gráfico de Linhas</h2>
    <canvas id="lineChart" width="600" height="300"></canvas>

    <script>
        fetch("{% url 'line_chart_json' %}")
            .then(response => response.json())
            .then(data => {
                const ctx = document.getElementById('lineChart').getContext('2d');
                const datasets = data.datasets.map(ds => ({
                    label: ds.label,
                    data: ds.data,
                    borderColor: '#' + Math.floor(Math.random() * 16777215).toString(16),
                    fill: false,
                    tension: 0.1
                }));

                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: true, position: 'top' },
                            title: { display: true, text: 'Gráfico de linhas da Agenda Escolar' }
                        },
                        scales: { y: { beginAtZero: true } }
                    }
                });
            })
            .catch(err => console.error('Erro ao carregar dados do gráfico:', err));
    </script>
</body>

</html>